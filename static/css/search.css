/* Section de recherche avec suggestions */
.search-section{
  position:relative;
  overflow:visible !important; /* Permettre aux suggestions de sortir du conteneur */
}
.search-input-wrapper{
  position:relative;
  overflow:visible !important; /* Permettre aux suggestions de sortir du conteneur */
}
.suggestions{
  position:absolute;
  top:100%;
  left:0;
  right:0;
  margin-top:4px;
  background:var(--card);
  background-image:var(--gradient-card);
  border:1px solid var(--border);
  border-radius:12px;
  box-shadow:var(--shadow-lg);
  z-index:100;
  max-height:350px;
  overflow:hidden;
  display:flex;
  flex-direction:column;
}
.suggestions-header{
  padding:12px 16px;
  font-size:0.9rem;
  font-weight:600;
  color:var(--text);
  border-bottom:1px solid var(--border);
  background:color-mix(in srgb, var(--primary) 8%, var(--card) 92%);
  display:flex;
  align-items:center;
  gap:8px;
}
.suggestions-icon{
  font-size:1rem;
}
.suggestions-list{
  max-height:300px;
  overflow-y:auto;
}
.suggestion-item{
  padding:14px 16px;
  cursor:pointer;
  transition:all 0.2s ease;
  border-bottom:1px solid var(--border);
  color:var(--text);
  font-size:15px;
  display:flex;
  align-items:center;
  gap:10px;
  position:relative;
}
.suggestion-item::before{
  content:'✓';
  font-size:1em;
  opacity:0.6;
  color:var(--primary);
  font-weight:bold;
  width:20px;
  height:20px;
  display:flex;
  align-items:center;
  justify-content:center;
  background:color-mix(in srgb, var(--primary) 15%, transparent);
  border-radius:50%;
  flex-shrink:0;
}
.suggestion-item:last-child{
  border-bottom:none;
}
.suggestion-item:hover,
.suggestion-item.selected{
  background:color-mix(in srgb, var(--primary) 10%, var(--card) 90%);
  color:var(--primary);
  font-weight:600;
}
.suggestion-item:hover::before,
.suggestion-item.selected::before{
  opacity:1;
}
.suggestion-item:first-child{
  border-radius:0;
}
.suggestion-item:last-child{
  border-radius:0 0 12px 12px;
}

/* Wrapper des résultats */
.results-wrapper{
  border:1px solid var(--border);
  background:var(--card);
  background-image:var(--gradient-card);
  border-radius:16px;
  padding:24px;
  margin-top:24px;
  box-shadow:var(--shadow);
  transition:all 0.3s ease;
}
.results-wrapper:hover{
  box-shadow:var(--shadow-lg);
}
.results-wrapper h3{
  font-size:1.5rem;
  font-weight:700;
  margin:0 0 20px;
  color:var(--text);
}

/* Liste & items */
.results-list{list-style:none;margin:0;padding:0}
.results-list li.result-item{
  display:grid;
  grid-template-columns: minmax(180px,240px) 1fr 150px; /* gauche / centre / actions */
  gap:24px;
  align-items:start;
  padding:20px;
  margin-bottom:16px;
  border:1px solid var(--border);
  border-radius:12px;
  background:var(--card);
  transition:all 0.3s ease;
}
.results-list li.result-item:hover{
  transform:translateX(4px);
  box-shadow:var(--shadow);
  border-color:var(--primary);
}
.results-list li.result-item:last-child{margin-bottom:0}
/* Assurer que la colonne centre peut se rétrécir */
.results-list li.result-item > .result-extract{
  min-width:0;
  overflow:hidden;
}

/* Colonne gauche : titre + meta */
.result-file .result-title{
  display:inline-block;
  font-weight:700;
  font-size:1.1rem;
  color:var(--text);
  text-decoration:none;
  margin-bottom:8px;
  transition:color 0.2s ease;
}
.result-file .result-title:hover{
  color:var(--primary);
}
.result-file .result-meta{
  display:block;
  font-size:.92rem;
  color:var(--muted);
  line-height:1.3;
}
.result-file .path{
  color:var(--muted);
  max-width:240px;
  display:inline-block;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

/* Colonne centre : extrait/snippet */
.result-extract{
  display:flex;
  align-items:flex-start;
  min-width:0;
}
.result-extract .result-snippet{
  display:-webkit-box;
  -webkit-line-clamp:2;
  line-clamp:2;
  -webkit-box-orient:vertical;
  overflow:hidden;
  text-overflow:ellipsis;
  padding:12px 16px;
  background:color-mix(in srgb, var(--bg) 50%, var(--card) 50%);
  border:1px solid var(--border);
  border-radius:10px;
  line-height:1.6;
  color:var(--text);
  word-wrap:break-word;
  word-break:break-word;
  width:100%;
  min-width:0;
  transition:all 0.2s ease;
}
.result-extract .result-snippet:hover{
  background:color-mix(in srgb, var(--primary) 5%, var(--card) 95%);
  border-color:var(--primary);
}
/* Support pour les navigateurs non-webkit */
@supports not (-webkit-line-clamp: 2) {
  .result-extract .result-snippet{
    display:block;
    max-height:calc(1.6em * 2.2);
    overflow:hidden;
    position:relative;
  }
  .result-extract .result-snippet::after{
    content:'...';
    position:absolute;
    bottom:0;
    right:0;
    background:inherit;
    padding-left:4px;
  }
}
mark{
  background:#fde04766;
  font-weight:700;
  border-radius:4px;
  padding:0 .15em;
}

/* Colonne droite : actions verticales */
.result-actions{
  display:flex;
  flex-direction:column;
  gap:12px;
  align-items:stretch;
}
.btn-cloud,
.btn-open{
  display:inline-flex;
  justify-content:center;
  align-items:center;
  min-height:56px;
  padding:12px 16px;
  border:0; 
  border-radius:12px;
  color:#fff; 
  text-decoration:none;
  font-weight:600;
  transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow:var(--shadow);
  position:relative;
  overflow:hidden;
}
.btn-cloud::before, .btn-open::before{
  content:'';
  position:absolute;
  top:50%;
  left:50%;
  width:0;
  height:0;
  border-radius:50%;
  background:rgba(255,255,255,0.2);
  transform:translate(-50%, -50%);
  transition:width 0.6s, height 0.6s;
}
.btn-cloud{ 
  background:linear-gradient(135deg, #27b7a4 0%, #1fa394 100%);
}
.btn-open { 
  background:linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
}
.btn-cloud:hover, .btn-open:hover{ 
  transform:translateY(-2px);
  box-shadow:var(--shadow-lg);
}
.btn-cloud:hover::before, .btn-open:hover::before{
  width:300px;
  height:300px;
}
.btn-cloud:active, .btn-open:active{ 
  transform:translateY(0);
  box-shadow:var(--shadow);
}

/* Petit badge si besoin */
.badge{
  display:inline-block;
  min-width:1.8em;
  padding:4px 10px;
  border-radius:999px;
  background:linear-gradient(135deg, #27b7a4 0%, #1fa394 100%);
  color:#fff;
  border:none;
  font-weight:700;
  font-size:0.85rem;
  box-shadow:0 2px 4px rgba(39,183,164,0.3);
}

/* Responsive : empiler sous 900px */
@media (max-width: 900px){
  .results-list li.result-item{
    grid-template-columns: 1fr; /* une seule colonne */
  }
  .result-actions{
    flex-direction:row;
    gap:10px;
  }
  .btn-cloud, .btn-open{
    width:100%;
    min-height:48px;
  }
  .result-file .path{ max-width:100% }
}
.actions{ margin-top:16px }
.btn{ display:block; width:max-content;
  margin: 0 auto; padding:10px 14px; border-radius:10px; background:var(--primary); color:var(--primary-contrast); text-decoration:none }
.btn:hover{ opacity:.50 }


/* === Modal centrée === */
.wc-modal{
  position: fixed;
  inset: 0;
  display: flex;                 /* centre la boîte */
  align-items: center;
  justify-content: center;
  padding: 2rem;                 /* marge interne aux bords */
  background: rgba(0,0,0,.55);   /* backdrop */
  z-index: 1000;
  backdrop-filter: blur(2px);
}
.hidden{ display: none !important; }  /* cache la modale quand inactive */

.wc-dialog{
  position: relative;
  max-width: min(1000px, 92vw);
  max-height: 86vh;
  border: 1px solid var(--border);
  background: var(--card);
  border-radius: 14px;
  box-shadow: var(--shadow);
  overflow: auto;                /* scroll interne si image grande */
  padding: 12px;
  animation: wc-pop .18s ease-out;
}
@keyframes wc-pop {
  from { transform: scale(.96); opacity: 0; }
  to   { transform: scale(1);   opacity: 1; }
}

.wc-dialog img{
  display: block;
  max-width: 100%;
  max-height: 80vh;             /* garde l’image dans la fenêtre */
  height: auto;
  object-fit: contain;
}

.wc-close{
  position: absolute;
  top: 8px; right: 8px;
  padding: 6px 10px;
  border: 0; border-radius: 10px;
  background: var(--primary);
  color: var(--primary-contrast);
  cursor: pointer;
  transition: opacity .2s ease, transform .05s ease;
}
.wc-close:hover{ opacity:.9 }
.wc-close:active{ transform: translateY(1px) }

/* Empêche le scroll de la page quand la modale est ouverte */
body.modal-open{ overflow: hidden; }

/* === Pagination === */
.pagination{
  margin-top: 32px;
  padding-top: 24px;
  border-top: 1px solid var(--border);
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 16px;
}
.pagination-info{
  font-size: 0.9rem;
  color: var(--muted);
  font-weight: 500;
}
.pagination-controls{
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
  justify-content: center;
}
.pagination-btn,
.pagination-number{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 40px;
  height: 40px;
  padding: 0 12px;
  border: 1px solid var(--border);
  border-radius: 50%;
  background: var(--card);
  color: var(--text);
  text-decoration: none;
  font-size: 0.95rem;
  font-weight: 500;
  transition: all 0.2s ease;
  cursor: pointer;
}
.pagination-btn:hover:not(.disabled),
.pagination-number:hover{
  background: color-mix(in srgb, var(--primary) 10%, var(--card) 90%);
  border-color: var(--primary);
  color: var(--primary);
  transform: translateY(-2px);
  box-shadow: var(--shadow);
}
.pagination-number.active{
  background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
  border-color: #2563eb;
  color: #fff;
  font-weight: 600;
  box-shadow: 0 2px 8px rgba(37, 99, 235, 0.3);
  cursor: default;
}
.pagination-number.active:hover{
  background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
  transform: none;
  box-shadow: 0 2px 8px rgba(37, 99, 235, 0.3);
}
.pagination-btn.disabled{
  opacity: 0.4;
  cursor: not-allowed;
  pointer-events: none;
}
.pagination-ellipsis{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 40px;
  height: 40px;
  color: var(--muted);
  font-size: 0.95rem;
}
.pagination-prev span,
.pagination-next span{
  font-size: 1.1rem;
  line-height: 1;
}


