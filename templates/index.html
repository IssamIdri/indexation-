{% extends "base.html" %}
{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}">

<div class="card">
  <h3>Indexer un dossier local</h3>
  <form action="{{ url_for('index_path') }}" method="post" class="row">
    <div class="grow">
      <input type="text" name="folder_path" placeholder="Ex: C:\Users\ISSAM\Documents\mon_dossier" required>
    </div>
    <div><button type="submit">Indexer</button></div>
  </form>
  <span class="muted small">Formats pris : .txt, .html, .docx, .pdf (parcours récursif).</span>
</div>

{% if summaries %}
<div class="card">
  <h3>Top mots par document (Top-5)</h3>
  <div class="table-wrap">
    <table class="result-table">
      <thead><tr><th>Document</th><th>Top mots × fréquences</th></tr></thead>
      <tbody>
        {% for s in summaries %}
        <tr>
          <td>{{ s.name }}</td>
          <td>
            {% for w,f in s.top %}
              <span class="chip">{{ w }} × {{ f }}</span>
            {% endfor %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  <p class="muted small">Ces stats sont calculées côté back après lemmatisation et filtrage (mots &lt; 2 caractères supprimés).</p>
</div>
{% endif %}
{% endblock %}
